# Project Management REST API

A Spring Boot 3 application that implements a mini Project & Task Management REST API with JWT-based authentication. Users can create and manage their own projects and tasks with secure, token-based access control.

**Tech Stack:** Spring Boot 3 | Java 17 | H2 Database | JWT Authentication

---

## Table of Contents

- [Run Locally](#run-locally)
- [H2 Database Console](#h2-database-console)
- [Authentication](#authentication)
- [API Endpoints](#api-endpoints)
  - [Authentication Endpoints](#authentication-endpoints)
  - [Project Endpoints](#project-endpoints)
  - [Task Endpoints](#task-endpoints)
- [Database Schema](#database-schema)

---

## Run Locally

### Prerequisites

- Java 17 or higher
- Maven

### Steps

1. **Configure Application Settings** (optional)
   
   Update `src/main/resources/application.properties` if you need to change the port or JWT secret.

2. **Build and Run**

   ```bash
   mvn clean package
   java -jar target/project-management-0.0.1-SNAPSHOT.jar
   ```

3. **Access the Application**
   
   The application will start at: `http://localhost:8082`

---

## H2 Database Console

Access the embedded H2 database console for debugging and data inspection:

- **URL:** `http://localhost:8082/h2-console`
- **JDBC URL:** `jdbc:h2:mem:testdb`
- **Username:** `sa`
- **Password:** _(leave empty)_

---

## Authentication

This API uses JWT (JSON Web Token) based authentication. After logging in, you'll receive a token that must be included in all subsequent requests to secured endpoints.

### Authorization Header Format

```
Authorization: Bearer <JWT_TOKEN>
```

---

## API Endpoints

### Authentication Endpoints

| Method | Endpoint          | Description                    | Auth Required |
|--------|-------------------|--------------------------------|---------------|
| POST   | `/auth/register`  | Register a new user            | No            |
| POST   | `/auth/login`     | Login and receive JWT token    | No            |

---

### Project Endpoints

All project endpoints require authentication.

| Method | Endpoint           | Description                              | Auth Required |
|--------|--------------------|------------------------------------------|---------------|
| POST   | `/projects`        | Create a new project                     | Yes           |
| GET    | `/projects`        | List all projects for logged-in user     | Yes           |
| PUT    | `/projects/{id}`   | Update project by ID                     | Yes           |
| DELETE | `/projects/{id}`   | Delete project and all its tasks         | Yes           |

---

### Task Endpoints

All task endpoints require authentication.

| Method | Endpoint                                      | Description                                          | Auth Required |
|--------|-----------------------------------------------|------------------------------------------------------|---------------|
| POST   | `/tasks/project/{projectId}`                  | Create a task under a specific project               | Yes           |
| GET    | `/tasks/project/{projectId}?sortBy=dueDate`   | List tasks for a project (sorted by dueDate or priority) | Yes       |
| GET    | `/tasks/search?keyword={value}`               | Search tasks across all projects of logged-in user   | Yes           |
| PUT    | `/tasks/{taskId}`                             | Update task by ID                                    | Yes           |
| DELETE | `/tasks/{taskId}`                             | Delete task by ID                                    | Yes           |

**Query Parameters:**
- `sortBy`: Sort tasks by `dueDate` or `priority` (default: `dueDate`)
- `keyword`: Search term for filtering tasks

---

## Database Schema

### Users Table

Stores user account information.

```sql
CREATE TABLE users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY,
    password VARCHAR(255),
    username VARCHAR(255),
    PRIMARY KEY (id)
);
```

**Columns:**
- `id`: Auto-generated primary key
- `username`: User's login name
- `password`: Encrypted password

---

### Projects Table

Stores project information linked to users.

```sql
CREATE TABLE projects (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY,
    created_at TIMESTAMP(6),
    description VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    updated_at TIMESTAMP(6),
    user_id BIGINT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**Columns:**
- `id`: Auto-generated primary key
- `name`: Project name
- `description`: Project description
- `created_at`: Timestamp of creation
- `updated_at`: Timestamp of last update
- `user_id`: Foreign key referencing the owner user

---

### Tasks Table

Stores task information linked to projects.

```sql
CREATE TABLE tasks (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY,
    created_at TIMESTAMP(6),
    description VARCHAR(255) NOT NULL,
    due_date DATE,
    priority ENUM('HIGH', 'LOW', 'MEDIUM') NOT NULL,
    status ENUM('COMPLETED', 'IN_PROGRESS', 'PENDING') NOT NULL,
    title VARCHAR(255) NOT NULL,
    updated_at TIMESTAMP(6),
    project_id BIGINT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (project_id) REFERENCES projects(id)
);
```

